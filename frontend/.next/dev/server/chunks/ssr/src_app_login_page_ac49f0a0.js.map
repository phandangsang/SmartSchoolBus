{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/DOANCNPM/smart-school-bus-tracking-system/frontend/src/app/login/page.js"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react';\r\nimport { Container, Row, Col, Card, Form, Button, Alert } from 'react-bootstrap';\r\nimport Link from 'next/link';\r\nimport '../styles/auth.css';\r\n\r\nexport default function LoginPage() {\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        password: '',\r\n        rememberMe: false\r\n    });\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : value\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        // Tài khoản admin mặc định\r\n        const ADMIN_ACCOUNT = {\r\n            email: 'admin@smartbus.com',\r\n            password: 'admin123'\r\n        };\r\n\r\n        if (!formData.email || !formData.password) {\r\n            setError('Vui lòng điền đầy đủ thông tin');\r\n            return;\r\n        }\r\n\r\n        // Kiểm tra tài khoản admin\r\n        if (formData.email === ADMIN_ACCOUNT.email && formData.password === ADMIN_ACCOUNT.password) {\r\n            // Lưu thông tin đăng nhập\r\n            localStorage.setItem('userRole', 'admin');\r\n            localStorage.setItem('userEmail', formData.email);\r\n            localStorage.setItem('userName', 'Admin');\r\n\r\n            // Chuyển hướng đến trang admin\r\n            window.location.href = '/admin';\r\n            return;\r\n        }\r\n\r\n        // Kiểm tra tài khoản đăng ký\r\n        const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');\r\n        const user = registeredUsers.find(u => u.email === formData.email && u.password === formData.password);\r\n\r\n        if (user) {\r\n            // Lưu thông tin đăng nhập\r\n            localStorage.setItem('userRole', user.role);\r\n            localStorage.setItem('userEmail', user.email);\r\n            localStorage.setItem('userName', user.fullName);\r\n\r\n            // Chuyển hướng tùy theo role\r\n            if (user.role === 'driver') {\r\n                window.location.href = '/driver'; // Trang tài xế\r\n            } else if (user.role === 'parent') {\r\n                window.location.href = '/parent'; // Trang phụ huynh\r\n            } else {\r\n                window.location.href = '/'; // Trang chủ\r\n            }\r\n        } else {\r\n            setError('Email hoặc mật khẩu không chính xác!');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"auth-page\">\r\n            <Container>\r\n                <Row className=\"justify-content-center align-items-center min-vh-100\">\r\n                    <Col md={6} lg={5}>\r\n\r\n\r\n                        <Card className=\"auth-card shadow\">\r\n                            <Card.Body className=\"p-4\">\r\n                                <h3 className=\"text-center mb-4\">Đăng nhập</h3>\r\n\r\n\r\n                                {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n                                <Form onSubmit={handleSubmit}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Email</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"email\"\r\n                                            name=\"email\"\r\n                                            // autoComplete=\"off\"\r\n                                            placeholder=\"Nhập email của bạn\"\r\n                                            value={formData.email}\r\n                                            onChange={handleChange}\r\n                                            required\r\n                                        />\r\n                                    </Form.Group>\r\n\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label>Mật khẩu</Form.Label>\r\n                                        <Form.Control\r\n                                            type=\"password\"\r\n                                            name=\"password\"\r\n                                            // autoComplete=\"off\"\r\n                                            placeholder=\"Nhập mật khẩu\"\r\n                                            value={formData.password}\r\n                                            onChange={handleChange}\r\n                                            required\r\n                                        />\r\n                                    </Form.Group>\r\n\r\n                                    <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n                                        <Form.Check\r\n                                            type=\"checkbox\"\r\n                                            name=\"rememberMe\"\r\n                                            label=\"Ghi nhớ đăng nhập\"\r\n                                            checked={formData.rememberMe}\r\n                                            onChange={handleChange}\r\n                                        />\r\n                                        <Link href=\"/forgot-password\" className=\"text-decoration-none\">\r\n                                            Quên mật khẩu?\r\n                                        </Link>\r\n                                    </div>\r\n\r\n                                    <Button\r\n                                        variant=\"primary\"\r\n                                        type=\"submit\"\r\n                                        className=\"w-100 mb-3\"\r\n                                    >\r\n                                        Đăng nhập\r\n                                    </Button>\r\n\r\n                                    <div className=\"text-center\">\r\n                                        <span className=\"text-muted\">Chưa có tài khoản? </span>\r\n                                        <Link href=\"/register\" className=\"text-decoration-none fw-bold\">\r\n                                            Đăng ký ngay\r\n                                        </Link>\r\n                                    </div>\r\n                                </Form>\r\n\r\n\r\n                            </Card.Body>\r\n                        </Card>\r\n\r\n                        <div className=\"text-center mt-4\">\r\n                            <Link href=\"/\" className=\"text-decoration-none text-muted\">\r\n                                ← Quay lại trang chủ\r\n                            </Link>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}